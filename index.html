<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Estante Virtual</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <header class="sidebar-header">
                <h2>Estante</h2>
            </header>
            <nav class="sidebar-nav">
                <a href="#" class="nav-link active" data-view="view-estante">üìö Estante</a>
                <a href="#" class="nav-link" data-view="view-adicionar">‚ûï Adicionar Livro</a>
                <a href="#" class="nav-link" data-view="view-desafio">üèÜ Metas de Leitura</a>
                <a href="#" class="nav-link" data-view="view-dashboard">üìä Dashboard</a>
            </nav>
        </aside>

        <main class="main-content">

            <div id="view-estante" class="view active">
                <h1>Minha Estante</h1>
                <div class="controles-estante">
                    <input type="search" id="input-busca" placeholder="Buscar por t√≠tulo ou autor...">
                    <div class="grupo-filtros">
                        <span>Filtrar por:</span>
                        <button class="filtro-status active" data-status="Todos">Todos</button>
                        <button class="filtro-status" data-status="Lido">Lidos</button>
                        <button class="filtro-status" data-status="Lendo">Lendo</button>
                        <button class="filtro-status" data-status="Quero Ler">Quero Ler</button>
                    </div>
                    <div class="grupo-ordenacao">
                        <label for="select-ordenacao">Ordenar por:</label>
                        <select id="select-ordenacao">
                            <option value="data-adicao-desc">Mais Recentes (Adi√ß√£o)</option>
                            <option value="nota-desc">Melhor Nota</option>
                            <option value="titulo-asc">T√≠tulo (A-Z)</option>
                            <option value="autor-asc">Autor (A-Z)</option>
                        </select>
                    </div>
                </div>

                <div class="info-resultados">
                    <p id="contador-resultados"></p>
                </div>

                <div class="controles-paginacao" id="controles-paginacao">
                    <div class="grupo-paginacao-tamanho">
                        <label for="select-tamanho-pagina">Mostrar por p√°gina:</label>
                        <select id="select-tamanho-pagina">
                            <option value="30" selected>30 livros</option>
                            <option value="60">60 livros</option>
                            <option value="90">90 livros</option>
                            <option value="9999">Todos</option>
                        </select>
                    </div>
                    <div class="grupo-paginacao-links" id="links-paginacao">
                    </div>
                </div>

                <div id="estante-de-livros" class="estante-de-livros">
                </div>
            </div>

            <div id="view-adicionar" class="view">
                <h1>Adicionar Novo Livro</h1>
                <div id="busca-api-container">
                    <div class="campo-busca-principal">
                        <input type="search" id="input-busca-api" placeholder="Digite o t√≠tulo ou autor do livro...">
                        <button id="btn-busca-api" class="btn btn-primario">Buscar na Internet</button>
                    </div>
                    <div class="opcoes-busca-api">
                        <span>Fonte:</span>
                        <input type="radio" id="api-google" name="api-source" value="google" checked>
                        <label for="api-google">Google Books</label>
                        <input type="radio" id="api-open" name="api-source" value="open">
                        <label for="api-open">Open Library</label>
                        <input type="radio" id="api-ambos" name="api-source" value="ambos">
                        <label for="api-ambos">Ambos (Fallback)</label>
                    </div>
                </div>

                <div id="adicionar-manual-container" class="hidden">
                    <p>N√£o encontrou o que procurava? <button id="btn-adicionar-manual" class="btn btn-secundario">Cadastrar Manualmente</button></p>
                </div>

                <div id="busca-api-paginacao" class="hidden">
                    <button id="btn-busca-anterior" class="btn btn-secundario">Anterior</button>
                    <span id="busca-api-info-pagina"></span>
                    <button id="btn-busca-proxima" class="btn btn-primario">Pr√≥xima</button>
                </div>
                <div id="resultados-busca-api"></div>

                <div id="painel-sincronizacao" class="hidden">
                    <h3>Atualizar Dados do Livro</h3>
                    <p>Clique nos campos que deseja atualizar com as informa√ß√µes encontradas na internet.</p>
                    <div id="sinc-container"></div>
                    <button id="btn-fechar-sinc" class="btn btn-secundario">Fechar Sincroniza√ß√£o</button>
                </div>

                <div id="form-container" class="hidden">
                    <hr class="separador-form">
                    <h2 id="form-livro-titulo">Complete os dados e salve</h2>
                    <form id="form-livro">
                        <input type="hidden" id="livro-id">
                        <div class="form-grid">
                            <div class="form-campo">
                                <label for="nomeDoLivro">T√≠tulo:</label>
                                <input type="text" id="nomeDoLivro" required>
                            </div>
                            <div class="form-campo">
                                <label for="autor">Autor:</label>
                                <input type="text" id="autor" required>
                            </div>
                            <div class="form-campo">
                                <label for="dataAquisicao">Data de Aquisi√ß√£o:</label>
                                <input type="date" id="dataAquisicao">
                            </div>
                            <div class="form-campo">
                                <label for="anoLancamento">Ano de Lan√ßamento:</label>
                                <input type="number" id="anoLancamento" placeholder="Ex: 2007">
                            </div>
                            <div class="form-campo">
                                <label for="editora">Editora:</label>
                                <input type="text" id="editora">
                            </div>
                            <div class="form-campo">
                                <label for="colecao">Cole√ß√£o:</label>
                                <input type="text" id="colecao">
                            </div>
                            <div class="form-campo">
                                <label for="volume">Volume:</label>
                                <input type="number" id="volume">
                            </div>
                            <div class="form-campo">
                                <label for="paginas">P√°ginas:</label>
                                <input type="number" id="paginas">
                            </div>
                            <div class="form-campo">
                                <label for="lingua">L√≠ngua:</label>
                                <input type="text" id="lingua" placeholder="Ex: PT-BR">
                            </div>
                            <div class="form-campo">
                                <label for="urlCapa">URL da Capa:</label>
                                <input type="url" id="urlCapa" placeholder="https://exemplo.com/capa.jpg">
                            </div>
                            <div class="form-campo">
                                <label for="categorias">Categorias/G√™neros:</label>
                                <input type="text" id="categorias" placeholder="Ex: Fantasia, Aventura">
                            </div>
                            <div class="form-campo full-width">
                                <label for="descricao">Descri√ß√£o/Sinopse:</label>
                                <textarea id="descricao" rows="6"></textarea>
                            </div>
                        </div>
                        <div class="form-botoes">
                            <button type="submit" class="btn btn-primario">Salvar Livro na Estante</button>
                        </div>
                    </form>
                </div>
            </div>

<div id="view-desafio" class="view">
    <h1>Minhas Metas de Leitura</h1>
    <div class="gerenciar-metas-container">
        <div class="campo-selecionar-meta">
            <label for="select-meta-ativa">Selecione uma Meta Ativa:</label>
            <select id="select-meta-ativa"></select>
            <button id="btn-deletar-meta-ativa" class="btn btn-perigo">Deletar Meta</button>
        </div>
    </div>

    <div class="criar-meta-container dash-card">
        <h3>Criar Nova Meta</h3>
        <form id="form-criar-meta" class="form-grid" style="grid-template-columns: 2fr 1fr 1.5fr 1fr; align-items: flex-end;">
            <div class="form-campo">
                <label for="input-meta-nome">Nome da Meta:</label>
                <input type="text" id="input-meta-nome" placeholder="Ex: Fim de Ano 2025" required>
            </div>
            <div class="form-campo">
                <label for="select-meta-ano">Ano:</label>
                <select id="select-meta-ano"></select>
            </div>
            <div class="form-campo">
                <label for="select-meta-tipo">Tipo de Meta:</label>
                <select id="select-meta-tipo">
                    <option value="livros">N¬∫ de Livros (Autom√°tico)</option>
                    <option value="paginas">N¬∫ de P√°ginas (Autom√°tico)</option>
                    <option value="lista">Lista de Livros (Manual)</option>
                </select>
            </div>
            <div class="form-campo" id="campo-objetivo-container">
                <label for="input-meta-objetivo">Objetivo:</label>
                <input type="number" id="input-meta-objetivo" placeholder="Ex: 8" required>
            </div>
            <div class="form-botoes">
                 <button type="submit" id="btn-criar-nova-meta" class="btn btn-primario">Criar Nova Meta</button>
            </div>
        </form>
    </div>

    <div id="desafio-ativo-container" class="hidden">
        <h2 id="meta-ativa-titulo" style="margin-top: 2rem;"></h2>

        <div id="gerenciar-lista-container" class="hidden" style="margin-top: 1.5rem;">
            <div class="desafio-meta">
                 <label for="input-busca-livros-meta">Adicionar/Remover livros da sua estante:</label>
                 <input type="search" id="input-busca-livros-meta" placeholder="Buscar por t√≠tulo ou autor...">
                 <div class="grupo-filtros" style="justify-content: flex-start; margin-bottom: 10px;">
                    <button class="filtro-status-meta active" data-status="Todos">Todos</button>
                    <button class="filtro-status-meta" data-status="NaoLidos">N√£o Lidos</button>
                 </div>
                 
                 <div id="seletor-livros-meta" class="estante-de-livros selecionavel">
                 </div>

                 <div class="controles-paginacao" id="paginacao-seletor-meta">
                    <button id="btn-meta-anterior" class="btn btn-secundario">Anterior</button>
                    <span id="info-pagina-meta"></span>
                    <button id="btn-meta-proxima" class="btn btn-primario">Pr√≥xima</button>
                 </div>
            </div>
        </div>

        <div class="desafio-progresso">
            <p id="progresso-texto">0 de 0 conclu√≠dos</p>
            <progress id="progresso-barra" value="0" max="100"></progress>
        </div>
        <h3 style="margin-top: 1.5rem;">Livros da Meta:</h3>
        <div id="desafio-livros-da-meta" class="estante-de-livros"></div>
    </div>

    <div id="nenhuma-meta-selecionada" class="active">
        <h2>Nenhuma meta selecionada</h2>
        <p>Crie uma nova meta ou selecione uma existente para come√ßar.</p>
    </div>
</div>

            <div id="view-dashboard" class="view">
                <h1>Dashboard de Leitura</h1>
                <div class="controles-dashboard">
                    <div class="grupo-filtros" id="filtro-ano-container">
                        <label for="select-ano-dashboard">Analisar Ano:</label>
                        <select id="select-ano-dashboard"></select>
                    </div>
                </div>
                <div class="dashboard-content active">
                    <div class="dashboard-layout">
                        <div class="dashboard-coluna-kpi">
                            <div id="kpi-nota-media" class="dash-card"></div>
                            <div id="kpi-total-livros" class="dash-card"></div>
                            <div id="kpi-total-paginas" class="dash-card"></div>
                            <div id="kpi-media-paginas" class="dash-card"></div>
                            <div id="kpi-variedade-autores" class="dash-card"></div>
                            <div id="kpi-velocidade-media" class="dash-card"></div>
                        </div>
                        <div class="dashboard-coluna">
                            <div id="kpi-autor-mais-lido" class="dash-card"></div>
                            <div id="kpi-melhor-livro" class="dash-card destaque"></div>
                            <div id="kpi-pior-livro" class="dash-card destaque"></div>
                        </div>
                    </div>
                    <div class="dashboard-layout" style="margin-top: 1.5rem;">
                        <div id="kpi-leitura-rapida" class="dash-card destaque"></div>
                        <div id="kpi-leitura-lenta" class="dash-card destaque"></div>
                        <div id="kpi-mes-produtivo" class="dash-card"></div>
                    </div>
                    <div class="tabela-card dash-card" id="lista-livros-ano">
                        <h3>Livros Lidos no Ano Selecionado</h3>
                        <div class="tabela-container full-height">
                            <table id="tabela-livros-ano"></table>
                        </div>
                    </div>
                    <hr class="separador-form">
                    <h2>Recordes Hist√≥ricos</h2>
                    <div class="dashboard-grid-geral">
                        <div class="tabela-card dash-card" id="resumo-por-ano">
                            <h3>Resumo por Ano</h3>
                            <div class="grafico-container">
                                <canvas id="grafico-resumo-anual"></canvas>
                            </div>
                        </div>
                         <div class="tabela-card dash-card" id="ranking-generos">
                            <h3>An√°lise por G√™nero</h3>
                             <div class="grafico-container">
                                <canvas id="grafico-generos"></canvas>
                            </div>
                        </div>
                        <div class="tabela-card dash-card" id="melhores-autores">
                            <h3>Melhores Autores (>= 3 livros)</h3>
                            <div class="tabela-container">
                                <table id="tabela-melhores-autores"></table>
                            </div>
                        </div>
                        <div class="tabela-card dash-card" id="melhores-colecoes">
                            <h3>Melhores Cole√ß√µes (>= 3 livros)</h3>
                            <div class="tabela-container">
                                <table id="tabela-melhores-colecoes"></table>
                            </div>
                        </div>
                        <div class="tabela-card dash-card" id="melhores-editoras">
                            <h3>Melhores Editoras (>= 3 livros)</h3>
                            <div class="tabela-container">
                                <table id="tabela-melhores-editoras"></table>
                            </div>
                        </div>
                        <div class="tabela-card dash-card" id="prateleira-vergonha">
                            <h3>Prateleira da Vergonha (N√£o Lidos)</h3>
                            <div class="tabela-container">
                                <table id="tabela-vergonha"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <dialog id="painel-livro">
        <div class="painel-container">
            <header class="painel-header">
                <h2 id="painel-titulo">T√≠tulo do Livro</h2>
                <button id="btn-fechar-painel" class="btn-acao">‚úñ</button>
            </header>
            <footer class="painel-footer">
                <button id="painel-btn-salvar" class="btn btn-primario">Salvar Altera√ß√µes</button>
            </footer>
            <div class="painel-body">
                <div class="painel-coluna-capa">
                    <img id="painel-capa" src="placeholder.jpg" alt="Capa do livro">
                    <div class="painel-botoes-principais">
                        <button id="painel-btn-editar" class="btn btn-secundario">Editar Cadastro</button>
                        <button id="painel-btn-excluir" class="btn btn-perigo">Excluir Livro</button>
                    </div>
                </div>
                <div class="painel-coluna-info">
                    <nav class="painel-tabs">
                        <button class="tab-button active" data-tab="tab-leitura">Minha Leitura</button>
                        <button class="tab-button" data-tab="tab-notas">Minhas Notas</button>
                        <button class="tab-button" data-tab="tab-detalhes">Detalhes</button>
                    </nav>
                    <div class="painel-conteudo-tabs">
                        <div id="tab-leitura" class="tab-content active">
                            <div class="leitura-header">
                                <h3>Meu Hist√≥rico de Leitura</h3>
                                <button id="painel-btn-nova-leitura" class="btn btn-secundario">‚ñ∂Ô∏è Iniciar Nova Leitura</button>
                            </div>
                            <div id="leituras-container"></div>
                            <div id="form-leitura-container" class="hidden"></div>
                        </div>
                        <div id="tab-notas" class="tab-content">
    <h3>Minhas Avalia√ß√µes da Leitura Atual</h3>
    <div id="aviso-nota-bloqueada" class="aviso">
        <p>As notas s√≥ podem ser adicionadas ou editadas ap√≥s a data de fim da leitura ser preenchida na aba "Minha Leitura".</p>
    </div>
    <form id="form-notas" class="painel-form hidden">
        <div class="notas-grid">
            <div class="slider-campo">
                <label>Personagens: <span id="valor-nota-personagens">5.0</span></label>
                <small>Qu√£o cr√≠veis, complexos e bem desenvolvidos s√£o os personagens? Voc√™ se conectou com eles?</small>
                <input type="range" id="nota-personagens" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Trama (Plot): <span id="valor-nota-plot">5.0</span></label>
                <small>A estrutura da hist√≥ria √© coesa? O enredo √© original, envolvente e com conflitos bem definidos?</small>
                <input type="range" id="nota-plot" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Constru√ß√£o de Mundo: <span id="valor-nota-desenvolvimento">5.0</span></label>
                <small>O universo da hist√≥ria √© imersivo e bem detalhado? Suas regras e cultura s√£o consistentes?</small>
                <input type="range" id="nota-desenvolvimento" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Ritmo (Pacing): <span id="valor-nota-pacing">5.0</span></label>
                <small>A hist√≥ria flui bem? O ritmo acelera e desacelera nos momentos certos para criar tens√£o ou respiro?</small>
                <input type="range" id="nota-pacing" min="0" max="10" step="0.1" value="5">
            </div>
             <div class="slider-campo">
                <label>Estilo de Escrita (Prosa): <span id="valor-nota-prosa">5.0</span></label>
                <small>A qualidade da escrita √© alta? O texto √© claro, evocativo e agrad√°vel de ler?</small>
                <input type="range" id="nota-prosa" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Originalidade: <span id="valor-nota-originalidade">5.0</span></label>
                <small>A premissa ou a execu√ß√£o da hist√≥ria trouxeram conceitos novos ou abordagens criativas?</small>
                <input type="range" id="nota-originalidade" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Temas e Profundidade: <span id="valor-nota-temas">5.0</span></label>
                <small>Os temas abordados s√£o relevantes e explorados com a profundidade que merecem?</small>
                <input type="range" id="nota-temas" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Impacto Emocional: <span id="valor-nota-impacto">5.0</span></label>
                <small>O livro provocou emo√ß√µes fortes em voc√™ (alegria, surpresa, tristeza, reflex√£o)?</small>
                <input type="range" id="nota-impacto" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Conclus√£o (Closing): <span id="valor-nota-closing">5.0</span></label>
                <small>O final resolve os conflitos de forma satisfat√≥ria e √© coerente com o resto da hist√≥ria?</small>
                <input type="range" id="nota-closing" min="0" max="10" step="0.1" value="5">
            </div>
            <div class="slider-campo">
                <label>Fator Releitura/Recomenda√ß√£o: <span id="valor-nota-releitura">5.0</span></label>
                <small>Voc√™ sentiria vontade de reler este livro no futuro ou o recomendaria com entusiasmo para algu√©m?</small>
                <input type="range" id="nota-releitura" min="0" max="10" step="0.1" value="5">
            </div>
        </div>
        <div class="nota-final-display">
            Nota Final Calculada: <strong id="nota-final-calculada">5.0</strong>
        </div>
    </form>
</div>
                        <div id="tab-detalhes" class="tab-content">
                            <h3>Detalhes do Livro</h3>
                            <div id="info-detalhes" class="detalhes-grid">
                                <p><strong>Autor:</strong> <span id="detalhe-autor"></span></p>
                                <p><strong>Editora:</strong> <span id="detalhe-editora"></span></p>
                                <p><strong>Ano:</strong> <span id="detalhe-ano"></span></p>
                                <p><strong>P√°ginas:</strong> <span id="detalhe-paginas"></span></p>
                                <p><strong>Idioma:</strong> <span id="detalhe-lingua"></span></p>
                                <p><strong>Cole√ß√£o:</strong> <span id="detalhe-colecao"></span></p>
                                <p><strong>Volume:</strong> <span id="detalhe-volume"></span></p>
                                <p><strong>Categorias:</strong> <span id="detalhe-categorias"></span></p>
                                <p class="detalhe-sinopse"><strong>Sinopse:</strong> <span id="detalhe-descricao"></span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </dialog>

    <div id="notificacao-container"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="estante.js"></script>
    <script src="adicionar.js"></script>
    <script src="dashboard.js"></script>
    <script src="desafio.js"></script>
    <script src="app.js"></script>
</body>
</html>